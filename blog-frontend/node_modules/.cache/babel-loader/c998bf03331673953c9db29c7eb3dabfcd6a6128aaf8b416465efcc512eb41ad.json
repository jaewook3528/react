{"ast":null,"code":"import _defineProperty from\"C:/react/git/react/blog-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/react/git/react/blog-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/react/git/react/blog-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _slicedToArray from\"C:/react/git/react/blog-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";var _handleActions;var _marked=/*#__PURE__*/_regeneratorRuntime().mark(authSaga);import{createAction,handleActions}from'redux-actions';import produce from'immer';import{takeLatest}from'redux-saga/effects';import createRequestSaga,{createRequestActionTypes}from'../lib/createRequestSaga';import*as authAPI from'../lib/api/auth';var CHANGE_FIELD='auth/CHANGE_FIELD';var INITIALIZE_FORM='auth/INITIALIZE_FORM';var _createRequestActionT=createRequestActionTypes('auth/REGISTER'),_createRequestActionT2=_slicedToArray(_createRequestActionT,3),REGISTER=_createRequestActionT2[0],REGISTER_SUCCESS=_createRequestActionT2[1],REGISTER_FAILURE=_createRequestActionT2[2];var _createRequestActionT3=createRequestActionTypes('auth/LOGIN'),_createRequestActionT4=_slicedToArray(_createRequestActionT3,3),LOGIN=_createRequestActionT4[0],LOGIN_SUCCESS=_createRequestActionT4[1],LOGIN_FAILURE=_createRequestActionT4[2];export var changeField=createAction(CHANGE_FIELD,function(_ref){var form=_ref.form,key=_ref.key,value=_ref.value;return{form:form,// register , login\nkey:key,// username, password, passwordConfirm\nvalue:value// 실제 바꾸려는 값\n};});export var initializeForm=createAction(INITIALIZE_FORM,function(form){return form;});// register/login\nexport var register=createAction(REGISTER,function(_ref2){var username=_ref2.username,password=_ref2.password;return{username:username,password:password};});export var login=createAction(LOGIN,function(_ref3){var username=_ref3.username,password=_ref3.password;return{username:username,password:password};});// 사가 생성\nvar registerSaga=createRequestSaga(REGISTER,authAPI.register);var loginSaga=createRequestSaga(LOGIN,authAPI.login);export function authSaga(){return _regeneratorRuntime().wrap(function authSaga$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return takeLatest(REGISTER,registerSaga);case 2:_context.next=4;return takeLatest(LOGIN,loginSaga);case 4:case\"end\":return _context.stop();}},_marked);}var initialState={register:{username:'',password:'',passwordConfirm:''},login:{username:'',password:''},auth:null,authError:null};var auth=handleActions((_handleActions={},_defineProperty(_handleActions,CHANGE_FIELD,function(state,_ref4){var _ref4$payload=_ref4.payload,form=_ref4$payload.form,key=_ref4$payload.key,value=_ref4$payload.value;return produce(state,function(draft){draft[form][key]=value;// 예: state.register.username을 바꾼다.\n});}),_defineProperty(_handleActions,INITIALIZE_FORM,function(state,_ref5){var _objectSpread2;var form=_ref5.payload;return _objectSpread(_objectSpread({},state),{},(_objectSpread2={},_defineProperty(_objectSpread2,form,initialState[form]),_defineProperty(_objectSpread2,\"authError\",null),_objectSpread2));}),_defineProperty(_handleActions,REGISTER_SUCCESS,function(state,_ref6){var auth=_ref6.payload;return _objectSpread(_objectSpread({},state),{},{authError:null,auth:auth});}),_defineProperty(_handleActions,REGISTER_FAILURE,function(state,_ref7){var error=_ref7.payload;return _objectSpread(_objectSpread({},state),{},{authError:error});}),_defineProperty(_handleActions,LOGIN_SUCCESS,function(state,_ref8){var auth=_ref8.payload;return _objectSpread(_objectSpread({},state),{},{authError:null,auth:auth});}),_defineProperty(_handleActions,LOGIN_FAILURE,function(state,_ref9){var error=_ref9.payload;return _objectSpread(_objectSpread({},state),{},{authError:error});}),_handleActions),initialState);export default auth;","map":{"version":3,"names":["authSaga","createAction","handleActions","produce","takeLatest","createRequestSaga","createRequestActionTypes","authAPI","CHANGE_FIELD","INITIALIZE_FORM","_createRequestActionT","_createRequestActionT2","_slicedToArray","REGISTER","REGISTER_SUCCESS","REGISTER_FAILURE","_createRequestActionT3","_createRequestActionT4","LOGIN","LOGIN_SUCCESS","LOGIN_FAILURE","changeField","_ref","form","key","value","initializeForm","register","_ref2","username","password","login","_ref3","registerSaga","loginSaga","_regeneratorRuntime","wrap","authSaga$","_context","prev","next","stop","_marked","initialState","passwordConfirm","auth","authError","_handleActions","_defineProperty","state","_ref4","_ref4$payload","payload","draft","_ref5","_objectSpread2","_objectSpread","_ref6","_ref7","error","_ref8","_ref9"],"sources":["C:/react/git/react/blog-frontend/src/modules/auth.js"],"sourcesContent":["import { createAction, handleActions } from 'redux-actions';\r\nimport produce from 'immer';\r\nimport { takeLatest } from 'redux-saga/effects';\r\nimport createRequestSaga, {\r\n    createRequestActionTypes,\r\n  } from '../lib/createRequestSaga';\r\n  import * as authAPI from '../lib/api/auth';\r\n\r\nconst CHANGE_FIELD = 'auth/CHANGE_FIELD';\r\nconst INITIALIZE_FORM = 'auth/INITIALIZE_FORM';\r\n\r\nconst [REGISTER, REGISTER_SUCCESS, REGISTER_FAILURE] = createRequestActionTypes(\r\n    'auth/REGISTER',\r\n);\r\n  \r\nconst [LOGIN, LOGIN_SUCCESS, LOGIN_FAILURE] = createRequestActionTypes(\r\n    'auth/LOGIN',\r\n);\r\n\r\nexport const changeField = createAction(\r\n  CHANGE_FIELD,\r\n  ({ form, key, value }) => ({\r\n    form, // register , login\r\n    key, // username, password, passwordConfirm\r\n    value, // 실제 바꾸려는 값\r\n  }),\r\n);\r\nexport const initializeForm = createAction(INITIALIZE_FORM, form => form); // register/login\r\nexport const register = createAction(REGISTER, ({ username, password }) => ({\r\n  username,\r\n  password,\r\n}));\r\nexport const login = createAction(LOGIN, ({ username, password }) => ({\r\n  username,\r\n  password,\r\n}));\r\n\r\n// 사가 생성\r\nconst registerSaga = createRequestSaga(REGISTER, authAPI.register);\r\nconst loginSaga = createRequestSaga(LOGIN, authAPI.login);\r\nexport function* authSaga() {\r\n  yield takeLatest(REGISTER, registerSaga);\r\n  yield takeLatest(LOGIN, loginSaga);\r\n}\r\n\r\nconst initialState = {\r\n  register: {\r\n    username: '',\r\n    password: '',\r\n    passwordConfirm: '',\r\n  },\r\n  login: {\r\n    username: '',\r\n    password: '',\r\n  },\r\n  auth: null,\r\n  authError: null,\r\n};\r\n\r\nconst auth = handleActions(\r\n  {\r\n    [CHANGE_FIELD]: (state, { payload: { form, key, value } }) =>\r\n      produce(state, draft => {\r\n        draft[form][key] = value; // 예: state.register.username을 바꾼다.\r\n      }),\r\n    [INITIALIZE_FORM]: (state, { payload: form }) => ({\r\n      ...state,\r\n      [form]: initialState[form],\r\n      authError: null, // 폼 전환 시 회원 인증 에러 초기화\r\n    }),\r\n    // 회원가입 성공\r\n    [REGISTER_SUCCESS]: (state, { payload: auth }) => ({\r\n      ...state,\r\n      authError: null,\r\n      auth,\r\n    }),\r\n    // 회원가입 실패\r\n    [REGISTER_FAILURE]: (state, { payload: error }) => ({\r\n      ...state,\r\n      authError: error,\r\n    }),\r\n    // 로그인 성공\r\n    [LOGIN_SUCCESS]: (state, { payload: auth }) => ({\r\n      ...state,\r\n      authError: null,\r\n      auth,\r\n    }),\r\n    // 로그인 실패\r\n    [LOGIN_FAILURE]: (state, { payload: error }) => ({\r\n      ...state,\r\n      authError: error,\r\n    }),\r\n  },\r\n  initialState,\r\n);\r\n\r\nexport default auth;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}