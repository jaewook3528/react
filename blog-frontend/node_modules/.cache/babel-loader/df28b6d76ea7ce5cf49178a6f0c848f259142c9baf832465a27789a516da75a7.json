{"ast":null,"code":"import _regeneratorRuntime from\"C:/react/git/react/blog-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/react/git/react/blog-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{withRouter}from'react-router-dom';import{readPost,unloadPost}from'../../modules/post';import PostViewer from'../../components/post/PostViewer';import PostActionButtons from'../../components/post/PostActionButtons';import{setOriginalPost}from'../../modules/write';import{removePost}from'../../lib/api/posts';var PostViewerContainer=function PostViewerContainer(_ref){var match=_ref.match,history=_ref.history;// 처음 마운트될 때 포스트 읽기 API 요청\nvar postId=match.params.postId;var dispatch=useDispatch();var _useSelector=useSelector(function(_ref2){var post=_ref2.post,loading=_ref2.loading,user=_ref2.user;return{post:post.post,error:post.error,loading:loading['post/READ_POST'],user:user.user};}),post=_useSelector.post,error=_useSelector.error,loading=_useSelector.loading,user=_useSelector.user;var onRemove=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return removePost(postId);case 3:history.push('/');// 홈으로 이동\n_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 9:case\"end\":return _context.stop();}},_callee,null,[[0,6]]);}));return function onRemove(){return _ref3.apply(this,arguments);};}();useEffect(function(){dispatch(readPost(postId));// 언마운트될 때 리덕스에서 포스트 데이터 없애기\nreturn function(){dispatch(unloadPost());};},[dispatch,postId]);var onEdit=function onEdit(){dispatch(setOriginalPost(post));history.push('/write');};return/*#__PURE__*/React.createElement(PostViewer,{post:post,loading:loading,error:error,actionButtons:/*#__PURE__*/React.createElement(PostActionButtons,{onEdit:onEdit,onRemove:onRemove}),ownPost:user&&user.id===post&&post.id});};export default withRouter(PostViewerContainer);","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","withRouter","readPost","unloadPost","PostViewer","PostActionButtons","setOriginalPost","removePost","PostViewerContainer","_ref","match","history","postId","params","dispatch","_useSelector","_ref2","post","loading","user","error","onRemove","_ref3","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","push","t0","console","log","stop","apply","arguments","onEdit","createElement","actionButtons","ownPost","id"],"sources":["C:/react/git/react/blog-frontend/src/containers/post/PostViewerContainer.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { readPost, unloadPost } from '../../modules/post';\r\nimport PostViewer from '../../components/post/PostViewer';\r\nimport PostActionButtons from '../../components/post/PostActionButtons';\r\nimport { setOriginalPost } from '../../modules/write';\r\nimport { removePost } from '../../lib/api/posts';\r\n\r\nconst PostViewerContainer = ({ match, history }) => {\r\n  // 처음 마운트될 때 포스트 읽기 API 요청\r\n  const { postId } = match.params;\r\n  const dispatch = useDispatch();\r\n  const { post, error, loading, user } = useSelector(({ post, loading, user }) => ({\r\n    post: post.post,\r\n    error: post.error,\r\n    loading: loading['post/READ_POST'],\r\n    user: user.user,\r\n  }));\r\n\r\n  const onRemove = async () => {\r\n    try {\r\n      await removePost(postId);\r\n      history.push('/'); // 홈으로 이동\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    dispatch(readPost(postId));\r\n    // 언마운트될 때 리덕스에서 포스트 데이터 없애기\r\n    return () => {\r\n      dispatch(unloadPost());\r\n    };\r\n  }, [dispatch, postId]);\r\n\r\n  const onEdit = () => {\r\n    dispatch(setOriginalPost(post));\r\n    history.push('/write');\r\n  };\r\n\r\n  return (\r\n    <PostViewer\r\n      post={post}\r\n      loading={loading}\r\n      error={error}\r\n      actionButtons={<PostActionButtons onEdit={onEdit} onRemove={onRemove} />}\r\n      ownPost={user && user.id === post && post.id}\r\n    />\r\n  );\r\n};\r\n\r\nexport default withRouter(PostViewerContainer);"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}